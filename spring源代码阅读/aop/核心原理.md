1. 得到代理对象
2. 利用递归链执行before, around,afterReturn,throw, after通知及目标方法。
      
    const before = fn => {
      console.log('before');
      return fn.execute();
    };
    const before1 = fn => {
      console.log('before1');
      return fn.execute();
    };

    const throwAd = fn => {
      try {
        return fn.execute();
      } catch (error) {
        console.log('get error');
        throw error;
      }
    };

    const after = fn => {
      try {
        return fn.execute();
      } finally {
        console.log('after');
      }
    };
    const afterReturn = fn => {
      const res = fn.execute();
      console.log('after return');
      return res;
    };
    const after1 = fn => {
      try {
        return fn.execute();
      } finally {
        console.log('after1');
      }
    };

    const around = fn => {
      console.log('around start ...');
      const res = fn.execute();
      console.log('around end ...');
      return res;
    };
    const around1 = fn => {
      console.log('around1 start...');
      const res = fn.execute();
      console.log('around1 end...');
      return res;
    };
    class Fn {
      list = [
        after,
        after1,
        afterReturn,
        throwAd,
        around,
        around1,
        before,
        before1,
      ];
      originMethod() {
        console.log('execute origin method');
        throw new Error('some error');
        // return 'origin method';
      }
      index = 0;
      execute() {
        if (this.index === this.list.length) {
          return this.originMethod();
        }
        return this.list[this.index++](this);
      }
    }
    const obj = new Fn();
    console.log('final result is ' + obj.execute());
